# DGMé—¨æ¶æ•°æ®ç”Ÿæˆå™¨ - å¿«é€Ÿå¼€å§‹

## ğŸš€ å¿«é€Ÿæµ‹è¯•

æµ‹è¯•è·¯æ®µ-æ—¥æœŸæ˜ å°„åŠŸèƒ½ï¼š

```bash
python dgm_gantry_generator.py --test
```

é¢„æœŸè¾“å‡ºï¼š
```
============================================================
æµ‹è¯•ï¼šè·¯æ®µ-æ—¥æœŸæ˜ å°„åŠŸèƒ½
============================================================

[æµ‹è¯•1] é¢„é…ç½®çš„è·¯æ®µ-æ—¥æœŸæ˜ å°„
----------------------------------------
  [é¢„é…ç½®æ˜ å°„] å·²åŠ è½½ 8 ä¸ªè·¯æ®µçš„æ—¥æœŸæ˜ å°„
    - éº»æ–‡é«˜é€Ÿ (G5615530120): 2023-01-03
    - éƒ½é¦™é«˜é€Ÿ (G7611530010): 2023-02-01
    - å½è‰¯è‡³æ˜­é€šé«˜é€Ÿ (S0010530010): 2023-02-20, 2023-02-21
    - ... è¿˜æœ‰ 5 ä¸ªè·¯æ®µ

å„è·¯æ®µçš„é‡‡æ ·æ—¥æœŸï¼š
  â€¢ éº»æ–‡é«˜é€Ÿ: 2023-01-03
  â€¢ éƒ½é¦™é«˜é€Ÿ: 2023-02-01
  â€¢ å½è‰¯è‡³æ˜­é€šé«˜é€Ÿ: 2023-02-20, 2023-02-21
  â€¢ ...

[æµ‹è¯•2] è·å–ç‰¹å®šè·¯æ®µçš„é‡‡æ ·æ—¥æœŸï¼ˆå¤šæ¬¡éšæœºï¼‰
----------------------------------------
  â€¢ éº»æ–‡é«˜é€Ÿ (G5615530120):
    é‡‡æ ·ç»“æœ: ['2023-01-03', '2023-01-03', '2023-01-03', '2023-01-03', '2023-01-03']
  â€¢ å½è‰¯è‡³æ˜­é€šé«˜é€Ÿ (S0010530010):
    é‡‡æ ·ç»“æœ: ['2023-02-20', '2023-02-21', '2023-02-20', '2023-02-21', '2023-02-20']
  ...

æµ‹è¯•å®Œæˆï¼æ‰€æœ‰è·¯æ®µéƒ½æœ‰æ­£ç¡®çš„æ—¥æœŸæ˜ å°„ã€‚
```

## ğŸ“ åŸºç¡€ä½¿ç”¨

### ç”Ÿæˆæ•°æ®ï¼ˆä½¿ç”¨é¢„é…ç½®æ˜ å°„ï¼‰

```bash
# ç”Ÿæˆ100æ¡æ•°æ®ï¼Œè‡ªåŠ¨ä½¿ç”¨æ­£ç¡®çš„è·¯æ®µ-æ—¥æœŸæ˜ å°„
python dgm_gantry_generator.py --count 100 --output generated.json
```

ç”Ÿæˆçš„æ•°æ®ä¼šè‡ªåŠ¨éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š
- **éº»æ–‡é«˜é€Ÿ**çš„æ•°æ®éƒ½åœ¨ 2023-01-03
- **éƒ½é¦™é«˜é€Ÿ**çš„æ•°æ®éƒ½åœ¨ 2023-02-01
- **å½è‰¯è‡³æ˜­é€šé«˜é€Ÿ**çš„æ•°æ®åœ¨ 2023-02-20 æˆ– 2023-02-21
- ...ï¼ˆå…¶ä»–è·¯æ®µç±»ä¼¼ï¼‰

### ä½¿ç”¨çœŸå®æ ·æœ¬å¢å¼º

å¦‚æœä½ æœ‰çœŸå®æ ·æœ¬æ•°æ®ï¼š

```bash
python dgm_gantry_generator.py \
    --count 100 \
    --output generated.json \
    --seed-data real_samples.json
```

è¿™ä¼šï¼š
1. åŠ è½½çœŸå®æ ·æœ¬ä½œä¸ºç”Ÿæˆç¤ºä¾‹
2. ä»çœŸå®æ ·æœ¬ä¸­å­¦ä¹ é¢å¤–çš„è·¯æ®µ-æ—¥æœŸæ˜ å°„
3. ä¸é¢„é…ç½®æ˜ å°„åˆå¹¶ï¼ˆä¸å†²çªçš„æƒ…å†µä¸‹ï¼‰

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### âœ… è‡ªåŠ¨ç”Ÿæ•ˆçš„è·¯æ®µ-æ—¥æœŸæ˜ å°„

ç³»ç»Ÿå†…ç½®äº†8ä¸ªè·¯æ®µçš„çœŸå®é‡‡æ ·æ—¥æœŸï¼š

| è·¯æ®µ | æ—¥æœŸ |
|------|------|
| éº»æ–‡é«˜é€Ÿ | 2023-01-03 |
| éƒ½é¦™é«˜é€Ÿ | 2023-02-01 |
| å½è‰¯è‡³æ˜­é€šé«˜é€Ÿ | 2023-02-20~21 |
| å½è‰¯è‡³é•‡é›„é«˜é€Ÿå…¬è·¯ | 2023-03-08~09 |
| å®œå®¾è‡³æ¯•èŠ‚é«˜é€Ÿå¨ä¿¡è‡³é•‡é›„æ®µ | 2023-03-15~16 |
| é’é¾™å’€è‡³æ°´ç”°æ–°åŒºé«˜é€Ÿ | 2023-03-22~23 |
| å¤§å…³è‡³æ°¸å–„é«˜é€Ÿ | 2023-12-22~23 |
| æ˜­é˜³è¥¿ç¯é«˜é€Ÿå…¬è·¯ | 2023-02-08~09 |

**æ— éœ€ä»»ä½•é…ç½®ï¼Œå¼€ç®±å³ç”¨ï¼**

### âœ… æ•°æ®ä¿çœŸåº¦

ç”Ÿæˆçš„æ•°æ®ä¿æŒï¼š
- âœ“ è·¯æ®µä¸æ—¥æœŸçš„çœŸå®å¯¹åº”å…³ç³»
- âœ“ é¿å…æ—¶é—´ç»´åº¦çš„æ•°æ®æ³„éœ²
- âœ“ ç¬¦åˆçœŸå®é‡‡æ ·åˆ†å¸ƒ

## ğŸ“Š éªŒè¯ç”Ÿæˆç»“æœ

ç”Ÿæˆæ•°æ®åï¼ŒéªŒè¯è·¯æ®µ-æ—¥æœŸæ˜ å°„æ˜¯å¦æ­£ç¡®ï¼š

```bash
# ç”Ÿæˆæ•°æ®
python dgm_gantry_generator.py --count 50 --output test.json

# åœ¨Pythonä¸­éªŒè¯
python
>>> import json
>>> data = json.load(open('test.json', encoding='utf-8'))
>>> 
>>> # æ£€æŸ¥éº»æ–‡é«˜é€Ÿçš„æ—¥æœŸ
>>> mw_samples = [s for s in data if s['section_id'] == 'G5615530120']
>>> dates = set(s['transaction_time'][:10] for s in mw_samples)
>>> print(f"éº»æ–‡é«˜é€Ÿçš„æ—¥æœŸ: {dates}")
éº»æ–‡é«˜é€Ÿçš„æ—¥æœŸ: {'2023-01-03'}
>>> 
>>> # æ£€æŸ¥å½è‰¯è‡³æ˜­é€šé«˜é€Ÿçš„æ—¥æœŸ
>>> yz_samples = [s for s in data if s['section_id'] == 'S0010530010']
>>> dates = set(s['transaction_time'][:10] for s in yz_samples)
>>> print(f"å½è‰¯è‡³æ˜­é€šé«˜é€Ÿçš„æ—¥æœŸ: {dates}")
å½è‰¯è‡³æ˜­é€šé«˜é€Ÿçš„æ—¥æœŸ: {'2023-02-20', '2023-02-21'}
```

## ğŸ”§ é«˜çº§é€‰é¡¹

### è‡ªå®šä¹‰è´§è½¦æ¯”ä¾‹

```bash
python dgm_gantry_generator.py \
    --count 100 \
    --truck-ratio 0.7 \
    --output generated.json
```

### é™é»˜æ¨¡å¼ï¼ˆä¸è¾“å‡ºè¿›åº¦ï¼‰

```bash
python dgm_gantry_generator.py \
    --count 100 \
    --output generated.json \
    --quiet
```

### é€šè¿‡Python APIä½¿ç”¨

```python
from dgm_gantry_generator import DGMGantryGenerator

# åˆ›å»ºç”Ÿæˆå™¨ï¼ˆè‡ªåŠ¨åŠ è½½é¢„é…ç½®æ˜ å°„ï¼‰
generator = DGMGantryGenerator()

# å¯é€‰ï¼šåŠ è½½çœŸå®æ ·æœ¬
# generator.load_real_samples("real_samples.json")

# ç”Ÿæˆæ•°æ®
result = generator.generate(count=100, verbose=True)

# è·å–ç”Ÿæˆçš„æ ·æœ¬
samples = result["samples"]

# æŸ¥çœ‹è¯„ä¼°ç»“æœ
print(f"å¿ å®åº¦: {result['evaluation']['faithfulness']['score']:.2%}")
print(f"å¤šæ ·æ€§: {result['evaluation']['diversity']['score']:.2%}")

# ä¿å­˜ç»“æœ
import json
with open("generated.json", "w", encoding="utf-8") as f:
    json.dump(samples, f, ensure_ascii=False, indent=2)
```

## ğŸ“š è¯¦ç»†æ–‡æ¡£

- **åŠŸèƒ½è¯´æ˜**ï¼š[SECTION_DATE_MAPPING.md](./SECTION_DATE_MAPPING.md) - è·¯æ®µ-æ—¥æœŸæ˜ å°„çš„è¯¦ç»†è¯´æ˜
- **ä»£ç å®ç°**ï¼š[dgm_gantry_generator.py](./dgm_gantry_generator.py) - å®Œæ•´æºä»£ç 

## â“ å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆéœ€è¦è·¯æ®µ-æ—¥æœŸæ˜ å°„ï¼Ÿ

A: çœŸå®æ•°æ®ä¸­ä¸åŒè·¯æ®µåœ¨ä¸åŒæ—¥æœŸé‡‡æ ·ã€‚å¦‚æœç”Ÿæˆæ•°æ®æ—¶å¿½ç•¥è¿™ä¸€ç‚¹ï¼Œä¼šå¯¼è‡´ï¼š
- æ—¶é—´ç»´åº¦çš„æ•°æ®æ³„éœ²
- æ¨¡å‹å­¦åˆ°é”™è¯¯çš„æ—¶é—´æ¨¡å¼
- è¯„ä¼°ç»“æœä¸å‡†ç¡®

### Q: é¢„é…ç½®æ˜ å°„ä¼šè‡ªåŠ¨ç”Ÿæ•ˆå—ï¼Ÿ

A: æ˜¯çš„ï¼é»˜è®¤æƒ…å†µä¸‹ï¼Œ`SectionDateMapper` ä¼šè‡ªåŠ¨åŠ è½½é¢„é…ç½®çš„æ˜ å°„ï¼Œæ— éœ€ä»»ä½•é¢å¤–æ“ä½œã€‚

### Q: å¯ä»¥æ·»åŠ æ›´å¤šè·¯æ®µçš„æ˜ å°„å—ï¼Ÿ

A: å¯ä»¥ï¼æœ‰ä¸¤ç§æ–¹å¼ï¼š
1. åœ¨ä»£ç ä¸­ä¿®æ”¹ `PRECONFIGURED_SECTION_DATES` å¸¸é‡
2. ä½¿ç”¨ `load_real_samples()` æ–¹æ³•ä»çœŸå®æ•°æ®ä¸­å­¦ä¹ 

### Q: å¦‚æœè·¯æ®µæ²¡æœ‰é¢„é…ç½®çš„æ—¥æœŸæ€ä¹ˆåŠï¼Ÿ

A: ç³»ç»Ÿä¼šä½¿ç”¨å…¨å±€æ—¥æœŸèŒƒå›´ï¼ˆ2023-01-03 ~ 2023-12-23ï¼‰å†…çš„éšæœºæ—¥æœŸã€‚

## ğŸ‰ å¼€å§‹ä½¿ç”¨

ç°åœ¨ä½ å¯ä»¥ç”Ÿæˆé«˜è´¨é‡çš„é—¨æ¶æ•°æ®äº†ï¼

```bash
python dgm_gantry_generator.py --count 100 --output my_data.json
```

ç”Ÿæˆçš„æ•°æ®å°†è‡ªåŠ¨ä¿æŒè·¯æ®µ-æ—¥æœŸçš„çœŸå®å¯¹åº”å…³ç³»ã€‚
